<ora-page-header title="Xã/Phường" [action]="actionHeader">
  <ng-template #actionHeader>
    <dropdown-up-excel (onUpload)="onClickUpload($event)" urlMauFile="/assets/templateFile/ImportXa.xlsx" [itemMenu1]="excelMenu1">
      <ng-template #excelMenu1>
        <button class="margin-left-5" title="Xuất danh sách ra excel" type="button" nz-button nzType="link" (click)="exportExcel()">
          <i nz-icon nzType="export" nzTheme="outline"></i> Xuất Excel
        </button>
      </ng-template>
    </dropdown-up-excel>
    <button nz-button nzType="primary" (click)="showCreateOrEditModal()"><i class="fa fa-plus"></i>Thêm mới</button>
  </ng-template>
</ora-page-header>

<ora-layout-filter (onSearch)="refresh()">
  <form nz-form [formGroup]="rfFormGroup" nzLayout="vertical">
    <nz-row nzGutter="8">
      <nz-col nzLg="8" nzSm="12">
        <input formControlName="filter" nz-input placeholder="Nhập tên xã/phường để tìm kiếm" />
      </nz-col>
      <nz-col nzLg="4" nzSm="6">
        <ora-select dirTinh formControlName="tinhId" placeHolder="Chọn tỉnh"></ora-select>
      </nz-col>
      <nz-col nzLg="4" nzSm="6">
        <ora-select dirHuyen [tinhId]="rfFormGroup.get('tinhId').value" formControlName="huyenId" placeHolder="Chọn huyện"></ora-select>
      </nz-col>
    </nz-row>
  </form>
</ora-layout-filter>

<ora-table
  [rows]="dataList"
  [isLoading]="isTableLoading"
  [totalRows]="totalItems"
  [(pageSize)]="pageSize"
  [(page)]="pageNumber"
  (pageSizeChange)="refresh()"
  (pageChange)="pageNumberChange()"
  (sortChange)="gridSort($event)"
>
  <ora-column header="STT" width="100px" align="center">
    <ng-template oraCell let-data>
      <!-- {{data | json}} -->
      {{ skipCount + dataList.indexOf(data) + 1 }}
    </ng-template>
  </ora-column>

  <ora-column header="Thao tác" [content]="contentAction" width="150px" align="center">
    <ng-template #contentAction let-data="dataItem">
      <a nz-button nzType="link" nz-tooltip="{{ 'Edit' | translate }}" (click)="showCreateOrEditModal(data)">
        <i nz-icon nzType="edit"></i>
      </a>
      <a nz-button nzType="link" nzDanger nz-tooltip="{{ 'Delete' | translate }}" (click)="delete(data)">
        <i nz-icon nzType="delete"></i>
      </a>
    </ng-template>
  </ora-column>
  <ora-column header="Mã" key="id" [sort]="true" width="100px" align="center"> </ora-column>
  <ora-column [sort]="true" header="Tên xã" key="ten" headerAlign="center"></ora-column>
  <ora-column [sort]="true" header="Tên huyện" key="tenHuyen" headerAlign="center"></ora-column>
  <ora-column [sort]="true" header="Tên tỉnh" key="tenTinh" headerAlign="center"></ora-column>
  <ora-column [sort]="true" header="Cấp" key="cap" headerAlign="center"></ora-column>
</ora-table>
